<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hollow Cinema</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
/* Splash Screen */
#splash-screen {
    position: fixed;
    inset: 0;
    background-color: var(--deep-indigo);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 2000;
    flex-direction: column;
    opacity: 1;
    transition: opacity 1s ease;
}

.splash-logo {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 15px;
    animation: logoFade 1.5s ease-in-out infinite alternate;
}

.splash-logo svg {
    width: 80px;
    height: 80px;
    filter: drop-shadow(0 0 15px var(--primary-purple-glow));
}

.splash-logo span {
    font-size: 2em;
    font-weight: 700;
    color: #fff;
    text-shadow: 0 0 15px var(--primary-purple-glow);
}

/* Animate the logo scaling */
@keyframes logoFade {
    0% { transform: scale(1); opacity: 0.7; }
    100% { transform: scale(1.15); opacity: 1; }
}
        :root {
            --primary-purple: #8A2BE2;
            --primary-purple-glow: rgba(138, 43, 226, 0.6);
            --dark-blue: #1a1a2e;
            --deep-indigo: #0c0a1d;
            --light-text: #e0e0e0;
            --highlight-blue: #483D8B;
            --card-bg: #1e1e3f;
            --border-color: #4a4a6a;
        }

        /* General Body Styles */
        body {
            margin: 0;
            font-family: 'Poppins', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: var(--light-text);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            background-color: var(--deep-indigo);
            overflow-x: hidden;
            padding-top: 80px; /* Offset for sticky navbar */
        }

        header.navbar {
            background: var(--dark-blue);
            padding: 15px 40px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.6);
            z-index: 1000;
            position: fixed; /* Sticky navbar */
            top: 0;
            left: 0;
            width: 100%;
            box-sizing: border-box;
            transition: background-color 0.3s ease, box-shadow 0.3s ease;
        }

        header.navbar.scrolled {
            background-color: rgba(26, 26, 46, 0.9);
            backdrop-filter: blur(10px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.7);
        }


        footer {
            text-align: center;
            color: #aaa;
            margin-top: auto;
            padding: 20px 0;
            background: var(--dark-blue);
        }

        main {
            flex-grow: 1;
        }

        /* ---------- Navbar ---------- */
        .navbar-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            max-width: 1600px;
            margin: 0 auto;
        }
        
        .navbar .logo {
            font-weight: 700;
            font-size: 1.6em;
            color: #fff;
            text-shadow: 0 0 10px var(--primary-purple-glow);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .navbar .logo svg {
            width: 40px;
            height: 40px;
        }

        .nav-links a {
            margin: 0 18px;
            color: var(--light-text);
            text-decoration: none;
            font-weight: 600;
            transition: color 0.3s ease, transform 0.2s ease;
            display: inline-block;
        }

        .nav-links a:hover {
            color: var(--primary-purple);
            transform: translateY(-2px);
        }

        .btn-group a {
            margin-left: 10px;
            background: var(--highlight-blue);
            color: #fff;
            padding: 10px 22px;
            border-radius: 50px;
            font-size: 0.9em;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        .btn-group a:hover {
            background-color: var(--primary-purple);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px var(--primary-purple-glow);
        }

        /* ---------- Hero Carousel ---------- */
        .movie-showcase {
            position: relative;
            margin: 40px auto;
            height: 450px;
            max-width: 1200px;
            border-radius: 16px;
            background: var(--dark-blue);
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            border: 1px solid var(--border-color);
        }

        .carousel-item {
            position: absolute;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 1s ease-in-out;
            background-size: cover;
            background-position: center;
            display: flex;
            align-items: flex-end;
        }

        .carousel-item.active {
            opacity: 1;
        }
        
        .carousel-item::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 70%;
            background: linear-gradient(to top, rgba(12, 10, 29, 0.9) 20%, transparent);
        }

        .carousel-content {
            position: relative;
            z-index: 2;
            color: #fff;
            padding: 40px;
            max-width: 60%;
            text-align: left;
        }

        .carousel-content h2 {
            font-size: 2.8em;
            margin: 0 0 15px 0;
            font-weight: 700;
            text-shadow: 0 2px 10px rgba(0,0,0,0.7);
        }
        
        .carousel-content .carousel-cta {
            background: var(--primary-purple);
            color: #fff;
            border: none;
            padding: 14px 30px;
            border-radius: 50px;
            font-weight: 600;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .carousel-content .carousel-cta:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px var(--primary-purple-glow);
        }

        .carousel-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(12, 10, 29, 0.7);
            color: #fff;
            border: none;
            padding: 12px 16px;
            cursor: pointer;
            border-radius: 50%;
            font-size: 1.5em;
            z-index: 5;
            transition: background-color 0.3s ease;
        }
        
        .carousel-nav:hover {
            background-color: var(--highlight-blue);
        }

        #carouselPrev { left: 20px; }
        #carouselNext { right: 20px; }
        
        .carousel-pagination {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 3;
            display: flex;
            gap: 10px;
        }
        
        .pagination-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: rgba(255,255,255,0.4);
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        
        .pagination-dot.active {
            background: #fff;
        }

        /* ---------- Tabs ---------- */
        .tabs {
            text-align: center;
            margin: 40px 0;
        }

        .tab {
            background: var(--dark-blue);
            color: var(--light-text);
            border: none;
            padding: 12px 30px;
            margin: 0 8px;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .tab.active,
        .tab:hover {
            background: var(--primary-purple);
            color: #fff;
            transform: translateY(-3px);
            box-shadow: 0 8px 25px var(--primary-purple-glow);
        }

        /* ---------- Movie Grid ---------- */
        .movie-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 35px;
            padding: 20px 40px 40px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .movie-card {
            background: var(--dark-blue);
            border-radius: 16px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.4);
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid var(--border-color);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .movie-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px var(--primary-purple-glow);
        }

        .movie-card img {
            width: 100%;
            height: 420px;
            object-fit: cover;
            display: block;
        }
        
        .movie-card-content {
            padding: 20px;
            text-align: left;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .movie-card-content h3 {
            margin: 0 0 10px 0;
            font-size: 1.4em;
            font-weight: 700;
            color: #fff;
        }

        .movie-card-content p {
            margin: 0 0 20px 0;
            font-size: 0.9em;
            color: #ccc;
            line-height: 1.6;
            flex-grow: 1;
        }

        /* ---------- Modal ---------- */
        .modal {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(12, 10, 29, 0.8);
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(10px);
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: linear-gradient(145deg, #232343, #1a1a2e);
            padding: 30px 35px;
            border-radius: 20px;
            max-width: 600px;
            width: 90%;
            color: var(--light-text);
            box-shadow: 0 10px 40px rgba(138, 43, 226, 0.4);
            border: 1px solid var(--border-color);
            position: relative;
            max-height: 90vh;
            overflow-y: auto;
            animation: slideIn 0.4s ease-out;
        }

        @keyframes slideIn {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .modal-header {
            text-align: center;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 25px;
        }

        #modalTitle {
            margin: 0;
            font-size: 2em;
            font-weight: 700;
        }

        .step-indicator {
            font-size: 0.9em;
            font-weight: 600;
            color: #aaa;
            margin-top: 5px;
        }

        .close-btn {
            position: absolute;
            top: 20px;
            right: 25px;
            background: none;
            border: none;
            color: #aaa;
            font-size: 2em;
            cursor: pointer;
            line-height: 1;
            transition: color 0.3s ease, transform 0.3s ease;
        }
        
        .close-btn:hover {
            color: #fff;
            transform: rotate(90deg);
        }

        /* Modal Booking Styles */
        .booking-step { display: none; }
        .booking-step.active { display: block; animation: stepFadeIn 0.5s; }
        
        @keyframes stepFadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .form-group {
            margin-bottom: 25px;
            text-align: left;
        }
        
        .date-display-group {
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        #movie-date {
            flex-grow: 1;
        }
        #date-day-display {
            font-weight: 600;
            color: #c3a1ff;
            background: #2a2a4e;
            padding: 12px 15px;
            border-radius: 10px;
        }

        .form-group-inline {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
        }

        .form-group label, .form-group-inline label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            font-size: 1.1em;
        }

        .form-group input[type="date"], .form-group-inline input[type="number"] {
            width: 100%;
            padding: 12px 15px;
            background: #2a2a4e;
            border: 1px solid var(--border-color);
            color: #fff;
            border-radius: 10px;
            font-family: inherit;
            font-size: 1em;
            box-sizing: border-box;
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        
        .form-group input[type="date"]:focus, .form-group-inline input[type="number"]:focus {
            outline: none;
            border-color: var(--primary-purple);
            box-shadow: 0 0 10px var(--primary-purple-glow);
        }

        .form-group-inline input[type="number"] { width: 90px; }
        input[type="date"]::-webkit-calendar-picker-indicator { filter: invert(1); cursor: pointer; }

        .time-slots {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 12px;
        }

        .time-slot-btn {
            background-color: #2a2a4e;
            border: 1px solid var(--border-color);
            color: #fff;
            padding: 12px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .time-slot-btn:hover {
            background-color: var(--highlight-blue);
            transform: translateY(-2px);
        }

        .time-slot-btn.selected {
            background-color: var(--primary-purple);
            border-color: var(--primary-purple);
            box-shadow: 0 0 15px var(--primary-purple-glow);
        }
        
        .screen-ui {
            background: #111;
            color: #aaa;
            padding: 10px;
            margin: 20px auto;
            text-align: center;
            font-weight: 700;
            letter-spacing: 2px;
            border-radius: 6px;
            width: 80%;
            box-shadow: 0 0 15px rgba(255,255,255,0.1);
        }

        .seat-legend {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
            font-size: 0.9em;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .legend-item .seat {
            width: 20px;
            height: 20px;
            cursor: default;
        }
        .legend-item .seat:hover {
            transform: none;
        }


        .seats-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 10px;
            margin: 20px auto;
            max-width: 420px;
        }

        .seat {
            height: 38px;
            background: #4a4a6a;
            border-radius: 7px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8em;
            font-weight: 600;
        }

        .seat:hover:not(.unavailable) {
            background-color: #6a6a9a;
            transform: scale(1.1);
        }

        .seat.selected {
            background-color: var(--primary-purple);
            transform: scale(1.1);
            box-shadow: 0 0 10px var(--primary-purple-glow);
        }

        .seat.unavailable {
            background-color: #2a2a4e;
            cursor: not-allowed;
            opacity: 0.6;
        }
        
        #seatSelectionInfo {
            font-weight: 600;
            font-size: 1.1em;
            color: #c3a1ff;
        }

        .modal-buttons-group {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 30px;
        }

        .modal-btn {
            background: var(--highlight-blue);
            color: #fff;
            border: none;
            padding: 14px 30px;
            border-radius: 50px;
            font-weight: 600;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .modal-btn:hover {
            background: var(--primary-purple);
            transform: translateY(-3px);
            box-shadow: 0 6px 20px var(--primary-purple-glow);
        }

        .modal-btn:disabled {
            background: #2a2a4e;
            cursor: not-allowed;
            opacity: 0.7;
            transform: none;
            box-shadow: none;
        }
        
        /* Payment & Confirmation Styles */
        #paymentSummary, #receipt {
            background: #2a2a4e;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 25px;
            text-align: left;
            font-size: 1.1em;
            border: 1px solid var(--border-color);
        }
        #paymentSummary p, #receipt p {
            margin: 10px 0;
            display: flex;
            justify-content: space-between;
        }
        #paymentSummary strong, #receipt strong {
            color: #c3a1ff;
            font-weight: 600;
        }
        #totalPrice {
            font-size: 1.4em;
            font-weight: 700;
            color: #fff;
            border-top: 1px solid var(--border-color);
            margin-top: 15px;
            padding-top: 15px;
        }

        .payment-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        .payment-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: #2a2a4e;
            padding: 20px 15px;
            border-radius: 12px;
            border: 2px solid var(--border-color);
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            text-align: center;
            height: 100px;
        }
        .payment-option:hover {
            background-color: var(--highlight-blue);
            border-color: var(--primary-purple);
            transform: translateY(-5px);
        }
        .payment-option input[type="radio"] {
            position: absolute;
            opacity: 0;
        }
        .payment-option input[type="radio"]:checked + .payment-content {
             transform: scale(1.05);
        }
        .payment-option-label {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            border-radius: 10px;
            border: 2px solid transparent;
            transition: border-color 0.3s;
        }
         .payment-option input[type="radio"]:checked ~ .payment-option-label {
            border-color: var(--primary-purple);
            box-shadow: 0 0 15px var(--primary-purple-glow);
        }
        .payment-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            transition: transform 0.3s;
        }

        .payment-content svg {
            height: 32px;
            max-width: 60px;
        }
        .payment-content span {
            font-weight: 600;
            font-size: 0.95em;
        }
        #receipt {
            line-height: 1.8;
            text-align: center;
        }
        #receipt p {
            text-align: left;
        }
        #qr-code {
            max-width: 150px;
            margin: 15px auto;
            display: block;
        }
        
        #finalConfirmation .modal-buttons-group, #bookingStep3 .modal-buttons-group {
            justify-content: space-between;
        }
        
        #addToCalendarBtn {
            display: inline-block;
            text-decoration: none;
            margin-top: 10px;
        }

    </style>
</head>

<body>
<div id="splash-screen">
    <div class="splash-logo">
        <svg viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="50" cy="50" r="48" stroke="white" stroke-width="4"/>
            <path d="M50 25C36.1929 25 25 36.1929 25 50C25 63.8071 36.1929 75 50 75" stroke="#8A2BE2" stroke-width="8" stroke-linecap="round"/>
        </svg>
        <span>Hollow Cinema</span>
    </div>
</div>
    <header class="navbar">
        <div class="navbar-content">
            <div class="logo">
                <svg viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="50" cy="50" r="48" stroke="white" stroke-width="4"/>
                    <path d="M50 25C36.1929 25 25 36.1929 25 50C25 63.8071 36.1929 75 50 75" stroke="var(--primary-purple)" stroke-width="8" stroke-linecap="round"/>
                </svg>
                <span>Hollow Cinema</span>
            </div>
            <nav class="nav-links">
                <a href="#">Home</a>
                <a href="#movies">Movies</a>
                <a href="/contact.html">Contact</a>
                <a href="/about.html">About</a>
            </nav>
    </header>

    <main>
        <!-- Carousel -->
        <section class="movie-showcase">
            <div id="carousel-container">
                <!-- JS fills carousel items -->
            </div>
            <button class="carousel-nav" id="carouselPrev">❮</button>
            <button class="carousel-nav" id="carouselNext">❯</button>
            <div class="carousel-pagination" id="carousel-pagination">
                <!-- JS fills pagination dots -->
            </div>
        </section>

        <!-- Tabs -->
        <div class="tabs">
            <button class="tab active" onclick="filterMovies('now')">NOW SHOWING</button>
            <button class="tab" onclick="filterMovies('soon')">COMING SOON</button>
        </div>

        <!-- Movies -->
        <section id="movies" class="movie-grid">
            <!-- JS fills cards -->
        </section>
    </main>

    <!-- Modal -->
    <div id="movieModal" class="modal">
        <div class="modal-content">
            <button class="close-btn" onclick="closeModal()">×</button>
            <div class="modal-header">
                 <h2 id="modalTitle">Movie Title</h2>
                 <div class="step-indicator" id="stepIndicator"></div>
            </div>
            
            <!-- Booking Step 1: Date and Time -->
            <div id="bookingStep1" class="booking-step active">
                <div class="form-group">
                    <label for="movie-date">Choose Date</label>
                    <div class="date-display-group">
                        <input type="date" id="movie-date">
                        <span id="date-day-display"></span>
                    </div>
                </div>
                <div class="form-group">
                    <label>Choose Time</label>
                    <div class="time-slots" id="timeSlots">
                        <!-- JS fills time slots -->
                    </div>
                </div>
                <div class="modal-buttons-group" style="justify-content: flex-end;">
                    <button class="modal-btn" onclick="showNextStep()">Next &rarr;</button>
                </div>
            </div>

            <!-- Booking Step 2: Seat Selection -->
            <div id="bookingStep2" class="booking-step">
                <div class="form-group-inline">
                    <label for="seat-quantity">How many seats?</label>
                    <input type="number" id="seat-quantity" value="1" min="1" max="10">
                </div>
                <div class="screen-ui">SCREEN</div>
                <div class="seat-legend">
                    <div class="legend-item"><div class="seat" style="background: #4a4a6a;"></div><span>Available</span></div>
                    <div class="legend-item"><div class="seat selected"></div><span>Selected</span></div>
                    <div class="legend-item"><div class="seat unavailable"></div><span>Booked</span></div>
                </div>
                <div class="seats-grid" id="seatsGrid">
                    <!-- JS fills seats -->
                </div>
                 <div class="modal-buttons-group">
                    <button class="modal-btn" onclick="showPrevStep()">&larr; Back</button>
                    <div id="seatSelectionInfo">Selected: 0/1</div>
                    <button class="modal-btn" id="confirmSeatsBtn" onclick="showNextStep()">Next &rarr;</button>
                </div>
            </div>

            <!-- Booking Step 3: Payment -->
            <div id="bookingStep3" class="booking-step">
                <div id="paymentSummary">
                    <!-- JS will populate this -->
                </div>
                <div class="form-group">
                    <label>Select Payment Method</label>
                    <div class="payment-options" id="paymentOptions">
                        <!-- JS will generate options -->
                    </div>
                </div>
                <div class="modal-buttons-group">
                    <button class="modal-btn" onclick="showPrevStep()">&larr; Back</button>
                    <button class="modal-btn" id="payBtn" onclick="showNextStep()">Pay Now</button>
                </div>
            </div>


            <!-- Booking Step 4: Confirmation -->
            <div id="finalConfirmation" class="booking-step">
                <h3>Booking Confirmed!</h3>
                <div id="receipt">
                     <!-- JS will populate this -->
                </div>
                <img id="qr-code" src="" alt="E-Ticket QR Code">
                <a id="addToCalendarBtn" class="modal-btn" href="#" download="movie-ticket.ics">Add to Calendar</a>
                <p style="text-align:center; font-size: 0.9em; margin-top: 20px;">A confirmation has been sent to your email.</p>
                <div class="modal-buttons-group" style="justify-content: flex-end;">
                    <button class="modal-btn" onclick="closeModal()">Done</button>
                </div>
            </div>
        </div>
    </div>

    <footer>© 2025 Hollow Cinema</footer>

    <script>
window.addEventListener('load', () => {
    // Wait 2.5 seconds then fade out
    setTimeout(() => {
        const splash = document.getElementById('splash-screen');
        splash.style.opacity = '0';
        // Remove the element after fade transition (1s)
        setTimeout(() => splash.remove(), 1000);
    }, 2500); // duration of splash display
});        // --- Sticky Navbar Logic ---
        const navbar = document.querySelector('.navbar');
        window.onscroll = () => {
            if (window.scrollY > 50) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
        };

        // --- Movie Data (UPDATED: Paste the new lists here) ---
        const nowShowing = [
            {
                title: "JUJUTSU KAISEN: Shibuya Incident × The Culling Game",
                poster: "/assets/img/jjk-shibuya.jpg",
                hero_image: "/assets/img/jjk-shibuya-HERO.jpg", // Use landscape image for carousel
                synopsis: "The Shibuya Incident and Culling Game collide in a deadly chain of curses, battles, and fate-defying confrontations."
            },
            {
                title: "Demon Slayer: The Infinity Castle",
                poster: "/assets/img/ds.jpg",
                hero_image: "/assets/img/ds-HERO.jpg", // Use landscape image for carousel
                synopsis: "Tanjiro Kamado and other members of the Demon Slayer Corps find themselves in an epic battle at Infinity Castle."
            },
            {
                title: "Chainsaw Man – The Movie: Reze Arc",
                poster: "/assets/img/cm.jpg",
                hero_image: "/assets/img/cm-HERO.jpg", // Use landscape image for carousel
                synopsis: "he story follows Denji as he meets a mysterious and charming girl named Reze who works at a cafe. Their budding romance quickly turns into a brutal conflict when it is revealed that Reze is the Bomb Devil hybrid and a Soviet agent with an ulterior motive: to steal Denji's heart."
            },
            {
                title: "Attack on Titan: The Last Attack",
                poster: "/assets/img/aot.jpg",
                hero_image: "/assets/img/aot-HERO.jpg", // Use landscape image for carousel
                synopsis: "The film follows the culmination of the conflict as Eren Yeager enacts The Rumbling leading an unstoppable army of Colossal Titans to trample the world outside Paradis Island in a bid to eliminate all threats to his people. A desperate alliance of Eren's former comrades and enemies, including Mikasa, Armin, and Reiner, scrambles to stop him in one final, climactic battle."
            },
            {
                title: "Dragon Ball Super: Broly",
                poster: "/assets/img/dbs.jpg",
                hero_image: "/assets/img/dbs-HERO.jpg",
                synopsis: "Earth is at peace after The Tournament of Power but Goku continues to train, knowing there are ever-stronger forces in the universe. With the arrival of a Saiyan warrior named Broly, Goku and Vegeta face their most dangerous challenge yet."
            },
            {
                title: "Your Name",
                poster: "https://upload.wikimedia.org/wikipedia/en/0/0b/Your_Name_poster.png",
                hero_image: "/assets/img/your-name-HERO.jpg", 
                synopsis: "Two teenagers mysteriously begin swapping bodies and form an unforgettable connection across time."
            },
            {
                title: "Weathering With You",
                poster: "/assets/img/wwy.jpg",
                hero_image: "/assets/img/wwy-HERO.jpg",
                synopsis: "A runaway boy meets a girl with the ability to control the weather, changing both their destinies forever."
            },
            {
                title: "JUJUTSU KAISEN: Hidden Inventory / Premature Death",
                poster: "/assets/img/jjk-hidden.jpg",
                hero_image: "/assets/img/jjk-hidden-HERO.jpg",
                synopsis: "The arc follows the then-inseparable second-year students, Gojo and Geto, widely recognized as the strongest duo."
            }
        ];

        const comingSoon = [
            {
              title: "Avengers: Doomsday",
                poster: "/assets/img/avengers.jpg",
                hero_image: "/assets/img/avengers-HERO.jpg", 
                synopsis: "The film will bring together a vast ensemble of heroes, including the Avengers, the Fantastic Four, Wakandans, New Avengers, and the X-Men, to face the existential, multiverse-spanning threat posed by Doctor Doom."
            },
            {  title: "Spider-Man: Brand New Day",
                poster: "/assets/img/spiderman.jpg",
                hero_image: "/assets/img/spiderman-HERO.jpg", 
                synopsis: "The fourth MCU Spider-Man film picks up after the conclusion of Spider-Man: No Way Home, where a global spell erased all knowledge of Peter Parker's identity as Spider-Man. The film is set to explore Peter's new life as he balances college and his responsibilities as a hero, now truly on his own. "
            },
            {  title: "Five Nights at Freddy's 2",
                poster: "/assets/img/fnaf2.jpg",
                hero_image: "/assets/img/fnaf2-HERO.jpg", 
                synopsis: "The horrors of Freddy Fazbear’s Pizza return as new mysteries and new animatronics emerge."
            },
            {
                title: "Inside Out 2",
                poster: "https://upload.wikimedia.org/wikipedia/en/f/f7/Inside_Out_2_poster.jpg",
                hero_image: "/assets/img/insideout2-HERO.jpg",
                synopsis: "Riley enters her teenage years, and brand-new emotions shake up her internal world."
            },
            {
                title: "Frozen III",
                poster: "/assets/img/frozen3.png",
                hero_image: "/assets/img/frozen3-HERO.jpg",
                synopsis: "Anna and Elsa return for another magical adventure beyond the kingdom of Arendelle."
            },
            {
                title: "Zootopia 2",
                poster: "/assets/img/zootopia2.jpeg",
                hero_image: "/assets/img/zootopia2-HERO.jpg",
                synopsis: "Judy Hopps and Nick Wilde reunite for a new case in the bustling city of Zootopia."
            },
        
        ];
        
        // --- Carousel Logic ---
        const carouselContainer = document.getElementById('carousel-container');
        const paginationContainer = document.getElementById('carousel-pagination');
        let carouselIndex = 0;
        let carouselInterval;

        // Helper functions to select slides and dots
        const slides = () => document.querySelectorAll('.carousel-item');
        const dots = () => document.querySelectorAll('.pagination-dot');

        function showSlide(i) {
            // Ensure index is within bounds (wrap around)
            carouselIndex = i % slides().length;
            if (carouselIndex < 0) {
                carouselIndex = slides().length - 1;
            }

            slides().forEach((s, idx) => s.classList.toggle('active', idx === carouselIndex));
            dots().forEach((d, idx) => d.classList.toggle('active', idx === carouselIndex));
        }

        function resetCarouselInterval() {
            clearInterval(carouselInterval);
            carouselInterval = setInterval(() => {
                carouselIndex = (carouselIndex + 1) % slides().length;
                showSlide(carouselIndex);
            }, 6000);
        }

        function renderCarousel() {
            carouselContainer.innerHTML = '';
            paginationContainer.innerHTML = '';

            nowShowing.forEach((movie, idx) => {
                const slide = document.createElement('div');
                slide.className = 'carousel-item';
                if (idx === 0) slide.classList.add('active');

                // FIX: Use the new hero_image for the landscape background
                const carouselImageSource = movie.hero_image || movie.poster; 
                slide.style.backgroundImage = `url(${carouselImageSource})`;
                
                const content = document.createElement('div');
                content.className = 'carousel-content';
                content.innerHTML = `
                    <h2>${movie.title}</h2>
                    <a href="#" class="carousel-cta" onclick="openModal('${movie.title.replace(/'/g, "\\'")}')">Book Now</a>
                `;
                slide.appendChild(content);
                carouselContainer.appendChild(slide);

                // Create Dot
                const dot = document.createElement('div');
                dot.className = 'pagination-dot';
                if (idx === 0) dot.classList.add('active');
                dot.onclick = () => {
                    carouselIndex = idx;
                    showSlide(carouselIndex);
                    resetCarouselInterval();
                };
                paginationContainer.appendChild(dot);
            });
        }
        
        // Event Listeners for Carousel Nav Buttons
        document.getElementById('carouselPrev').onclick = () => {
            showSlide(carouselIndex - 1);
            resetCarouselInterval();
        };
        document.getElementById('carouselNext').onclick = () => {
            showSlide(carouselIndex + 1);
            resetCarouselInterval();
        };
        
        // --- Movie Grid Rendering & Tabs ---
        const movieContainer = document.getElementById('movies');

        function renderMovies(list) {
            movieContainer.innerHTML = "";
            list.forEach(movie => {
                const card = document.createElement('div');
                card.className = 'movie-card';
                
                // Card uses the portrait poster property
                card.innerHTML = `
                    <img src="${movie.poster}" alt="${movie.title}">
                    <div class="movie-card-content">
                        <h3>${movie.title}</h3>
                        <p>${movie.synopsis}</p>
                    </div>
                `;
                card.onclick = () => openModal(movie.title);
                movieContainer.appendChild(card);
            });
        }

        function filterMovies(type) {
            document.querySelectorAll('.tab').forEach(btn => btn.classList.remove('active'));
            // Use event.target if called directly from the button click, otherwise find the button:
            const targetButton = event.target.classList.contains('tab') ? event.target : document.querySelector(`.tab[onclick="filterMovies('${type}')"]`);
            if (targetButton) targetButton.classList.add('active');
            
            renderMovies(type === 'now' ? nowShowing : comingSoon);
        }

        // --- Modal & Booking Logic ---
        const TICKET_PRICE = 350;
        const modal = document.getElementById('movieModal');
        const modalTitle = document.getElementById('modalTitle');
        const stepIndicator = document.getElementById('stepIndicator');
        const dateInput = document.getElementById('movie-date');
        const dateDayDisplay = document.getElementById('date-day-display');
        const timeSlotsContainer = document.getElementById('timeSlots');
        const seatsGridContainer = document.getElementById('seatsGrid');
        const seatQuantityInput = document.getElementById('seat-quantity');
        const seatSelectionInfo = document.getElementById('seatSelectionInfo');
        const confirmSeatsBtn = document.getElementById('confirmSeatsBtn');

        const bookingSteps = document.querySelectorAll('.booking-step');
        let currentStep = 0;
        const bookingDetails = {};

        const stepTitles = [
            "Step 1 of 4: Select Date & Time",
            "Step 2 of 4: Choose Your Seats",
            "Step 3 of 4: Confirm & Pay",
            "Step 4 of 4: Booking Complete"
        ];
        
        function updateDateDisplay(dateString) {
            const date = new Date(dateString + 'T00:00:00');
            const options = { weekday: 'long' };
            dateDayDisplay.textContent = new Intl.DateTimeFormat('en-US', options).format(date);
        }
        
        dateInput.addEventListener('change', (e) => updateDateDisplay(e.target.value));

        function openModal(title) {
            bookingDetails.movieTitle = title;
            modalTitle.textContent = title;
            
            // Set initial date to today
            const today = new Date(); 
            const yyyy = today.getFullYear();
            const mm = String(today.getMonth() + 1).padStart(2, '0');
            const dd = String(today.getDate()).padStart(2, '0');
            const todayString = `${yyyy}-${mm}-${dd}`;
            
            dateInput.value = todayString;
            dateInput.min = todayString;
            updateDateDisplay(todayString);

            generateTimeSlots();
            generateSeats();
            generatePaymentOptions();
            
            seatQuantityInput.value = 1;
            updateSelectionInfo();

            currentStep = 0;
            updateBookingStep();
            
            modal.style.display = 'flex';
        }

        function closeModal() {
            modal.style.display = 'none';
        }
        
        window.onclick = e => {
            if (e.target === modal) closeModal();
        };

        function updateBookingStep() {
            bookingSteps.forEach((step, index) => {
                step.classList.toggle('active', index === currentStep);
            });
            stepIndicator.textContent = stepTitles[currentStep];
        }

        function showNextStep() {
            // --- VALIDATION FOR CURRENT STEP ---
            if (currentStep === 0) { // Step 1: Date & Time
                const selectedTime = document.querySelector('.time-slot-btn.selected');
                if (!selectedTime) {
                    alert("Please select a time.");
                    return;
                }
                bookingDetails.time = selectedTime.textContent;
                bookingDetails.date = new Date(dateInput.value + 'T00:00:00').toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'});
                bookingDetails.rawDate = dateInput.value;

            } else if (currentStep === 1) { // Step 2: Seats
                const quantity = parseInt(seatQuantityInput.value);
                const selectedCount = document.querySelectorAll('.seat.selected').length;
                if (selectedCount !== quantity) {
                    alert(`Please select exactly ${quantity} seat(s).`);
                    return;
                }
                bookingDetails.seats = Array.from(document.querySelectorAll('.seat.selected')).map(s => s.dataset.seatId);
                bookingDetails.quantity = quantity;
                bookingDetails.totalPrice = quantity * TICKET_PRICE;
                populatePaymentSummary();

            } else if (currentStep === 2) { // Step 3: Payment
                const selectedPayment = document.querySelector('input[name="payment"]:checked');
                if (!selectedPayment) {
                    alert("Please select a payment method.");
                    return;
                }
                bookingDetails.paymentMethod = selectedPayment.value;
                populateReceipt();
                generateICSFile();
            }

            if (currentStep < bookingSteps.length - 1) {
                currentStep++;
                updateBookingStep();
            }
        }

        function showPrevStep() {
            if (currentStep > 0) {
                currentStep--;
                updateBookingStep();
            }
        }
        
        function generateTimeSlots() {
            timeSlotsContainer.innerHTML = '';
            const times = ["12:00 PM", "02:30 PM", "05:00 PM", "07:30 PM", "10:00 PM"];
            times.forEach(time => {
                const btn = document.createElement('button');
                btn.className = 'time-slot-btn';
                btn.textContent = time;
                btn.onclick = (e) => {
                    document.querySelectorAll('.time-slot-btn').forEach(b => b.classList.remove('selected'));
                    e.target.classList.add('selected');
                };
                timeSlotsContainer.appendChild(btn);
            });
        }
        
        function handleSeatClick(e) {
            const seat = e.currentTarget;
            if (seat.classList.contains('unavailable')) return;

            const quantity = parseInt(seatQuantityInput.value);
            const selectedSeats = document.querySelectorAll('.seat.selected');
            const isSelected = seat.classList.contains('selected');

            if (!isSelected && selectedSeats.length >= quantity) {
                return;
            }
            
            seat.classList.toggle('selected');
            updateSelectionInfo();
        }
        
        function updateSelectionInfo() {
            const quantity = parseInt(seatQuantityInput.value);
            const selectedCount = document.querySelectorAll('.seat.selected').length;
            seatSelectionInfo.textContent = `Selected: ${selectedCount}/${quantity}`;
            confirmSeatsBtn.disabled = selectedCount !== quantity;
        }

        seatQuantityInput.addEventListener('input', () => {
            document.querySelectorAll('.seat.selected').forEach(s => s.classList.remove('selected'));
            updateSelectionInfo();
        });

        function generateSeats() {
            seatsGridContainer.innerHTML = '';
            const rows = ['A', 'B', 'C', 'D', 'E'];
            const cols = 6;
            const unavailableSeats = ['A3', 'A4', 'C5', 'C6', 'D1']; 

            rows.forEach(row => {
                for (let i = 1; i <= cols; i++) {
                    const seatId = `${row}${i}`;
                    const seat = document.createElement('div');
                    seat.className = 'seat';
                    seat.textContent = seatId;
                    seat.dataset.seatId = seatId;

                    if (unavailableSeats.includes(seatId)) {
                        seat.classList.add('unavailable');
                    } else {
                        seat.onclick = handleSeatClick;
                    }
                    seatsGridContainer.appendChild(seat);
                }
            });
            updateSelectionInfo();
        }

        function generatePaymentOptions() {
            const container = document.getElementById('paymentOptions');
            container.innerHTML = '';
            const options = {
                'Credit/Debit': '<svg fill="#fff" viewBox="0 0 384 512"><path d="M336 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM48 96h288v48H48V96zm288 304H48v-96h288v96z"/></svg>',
                'GCash/Maya': '<svg fill="#0052FF" viewBox="0 0 448 512"><path d="M319.1 111.9c-2.7-2.9-6.5-4.2-10.2-4.2h-22.1c-12.3 0-22.3 10-22.3 22.3v5.6c0 12.3 10 22.3 22.3 22.3h1.8c4.3 0 8.3-2.1 10.9-5.6l64-64c4.6-4.6 12.1-4.6 16.6 0l48 48c4.6 4.6 4.6 12.1 0 16.6l-207.1 208c4.6 4.6-12.1 4.6-16.6 0l-128-128c-4.6-4.6-4.6-12.1 0-16.6l48-48c4.6-4.6 12.1-4.6 16.6 0l95.1 95.1L319.1 111.9z"/></svg>',
                'QR PH': '<svg fill="#000" viewBox="0 0 512 512"><path d="M0 0h176v176H0V0zm208 0h96v96h-96V0zm128 0h176v176H336V0zM0 336h176v176H0V336zm336 0h176v176H336V336zm-32 32h-96v112h96V368zM208 208h96v96h-96v-96z"/></svg>',
                'Cash': '<svg fill="#2E8B57" viewBox="0 0 576 512"><path d="M96 64C43 64 0 107 0 160v192c0 53 43 96 96 96h384c53 0 96-43 96-96V160c0-53-43-96-96-96H96zM288 320a64 64 0 1 1 0-128 64 64 0 1 1 0 128z"/></svg>'
            };
            
            for (const key in options) {
                const label = document.createElement('label');
                label.className = 'payment-option';
                
                const radio = document.createElement('input');
                radio.type = 'radio';
                radio.name = 'payment';
                radio.value = key;
                
                const content = document.createElement('div');
                content.className = 'payment-content';
                content.innerHTML = options[key];

                const text = document.createElement('span');
                text.textContent = key;
                content.appendChild(text);

                const optionLabel = document.createElement('div');
                optionLabel.className = 'payment-option-label';

                label.appendChild(radio);
                label.appendChild(content);
                label.appendChild(optionLabel);
                container.appendChild(label);
            }
        }

        function populatePaymentSummary() {
            const container = document.getElementById('paymentSummary');
            container.innerHTML = `
                <p><span><strong>Movie:</strong></span> <span>${bookingDetails.movieTitle}</span></p>
                <p><span><strong>Seats (${bookingDetails.quantity}):</strong></span> <span>${bookingDetails.seats.join(', ')}</span></p>
                <p id="totalPrice"><span><strong>Total:</strong></span> <span>₱${bookingDetails.totalPrice.toFixed(2)}</span></p>
            `;
        }
        
        function populateReceipt() {
             const container = document.getElementById('receipt');
             const qrCodeData = encodeURIComponent(JSON.stringify(bookingDetails));
             document.getElementById('qr-code').src = `https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${qrCodeData}`;
             container.innerHTML = `
                 <p><span><strong>Movie:</strong></span> <span>${bookingDetails.movieTitle}</span></p>
                 <p><span><strong>Date:</strong></span> <span>${bookingDetails.date}</span></p>
                 <p><span><strong>Time:</strong></span> <span>${bookingDetails.time}</span></p>
                 <p><span><strong>Seats:</strong></span> <span>${bookingDetails.seats.join(', ')} (${bookingDetails.quantity})</span></p>
                 <p><span><strong>Payment:</strong></span> <span>${bookingDetails.paymentMethod}</span></p>
                 <p id="totalPrice"><span><strong>Total Paid:</strong></span> <span>₱${bookingDetails.totalPrice.toFixed(2)}</span></p>
             `;
        }

        function generateICSFile() {
            const timeString = bookingDetails.time; 
            const [time, modifier] = timeString.split(' ');
            let [hours, minutes] = time.split(':');
            if (hours === '12' && modifier === 'AM') {
                hours = '00';
            } else if (modifier === 'PM' && hours !== '12') {
                hours = parseInt(hours, 10) + 12;
            }
            
            const startDate = new Date(`${bookingDetails.rawDate}T${String(hours).padStart(2, '0')}:${minutes}:00`);
            const endDate = new Date(startDate.getTime() + (2 * 60 * 60 * 1000)); // Assume 2 hour duration

            const toUTCString = (date) => date.toISOString().replace(/[-:]/g, '').split('.')[0] + 'Z';

            const icsContent = [
                'BEGIN:VCALENDAR',
                'VERSION:2.0',
                'PRODID:-//HollowCinema//EN',
                'BEGIN:VEVENT',
                `UID:${Date.now()}@hollowcinema.com`,
                `DTSTAMP:${toUTCString(new Date())}`,
                `DTSTART:${toUTCString(startDate)}`,
                `DTEND:${toUTCString(endDate)}`,
                `SUMMARY:Watch ${bookingDetails.movieTitle}`,
                `DESCRIPTION:Your movie booking for ${bookingDetails.movieTitle}. Seats: ${bookingDetails.seats.join(', ')}.`,
                'LOCATION:Hollow Cinema',
                'END:VEVENT',
                'END:VCALENDAR'
            ].join('\n');

            const calendarBtn = document.getElementById('addToCalendarBtn');
            calendarBtn.href = `data:text/calendar;charset=utf8,${encodeURIComponent(icsContent)}`;
        }

        // --- Initial setup calls ---
        renderCarousel();
        renderMovies(nowShowing); // Initial render of Now Showing

        // Initial setup for the date input and display
        const today = new Date();
        const yyyy = today.getFullYear();
        const mm = String(today.getMonth() + 1).padStart(2, '0');
        const dd = String(today.getDate()).padStart(2, '0');
        const formattedToday = yyyy + '-' + mm + '-' + dd;
        
        dateInput.value = formattedToday;
        dateInput.min = formattedToday;
        updateDateDisplay(formattedToday);
        
        resetCarouselInterval(); // Start the auto-slide
    </script>
</body>
</html>

